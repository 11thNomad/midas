 Full review comments:

  - [P1] Fall back to candle close when chain underlying price is invalid — /workspaces/midas/scripts/
    run_paper.py:443-447
    This uses chain_df["underlying_price"] whenever an option chain exists, even if that value is 0/missing
    (which can happen when the underlying quote is unavailable or the symbol is not in _INDEX_QUOTE_MAP).
    That value is then passed as close_price to the paper executor, so strategies without explicit order
    prices (e.g. momentum/regime_probe) can be filled at zero and produce invalid P&L/circuit-breaker state.
    Guard this with a positive-price check and fall back to candle close.
  - [P2] Treat report end date as inclusive day range — /workspaces/midas/scripts/paper_fills_report.py:107-
    109
    --end is parsed as midnight (YYYY-MM-DD 00:00:00) and passed directly into read_time_series, which
    filters with <= end; this drops all fills later on the specified end date. In the documented usage
    (--start ... --end ...), the final day's intraday fills are silently omitted, skewing daily totals.
  - [P2] Make visual-review end date include the full day — /workspaces/midas/scripts/
    regime_visual_review.py:191-191
    The CLI --end value is date-only and gets interpreted as midnight, then used directly for candle reads.
    For intraday (and often daily) data this excludes most or all candles on the requested end date, so
    replay artifacts can miss the final session while appearing successful.